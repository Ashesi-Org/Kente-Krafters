<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Color Replacement</title>
</head>
<body>
  <canvas id="imageCanvas" width="500" height="500" style="border:1px solid #000;"></canvas>

  <script>
    const canvas = document.getElementById('imageCanvas');
    const ctx = canvas.getContext('2d');
    let imageData;

    
    // Load your external image
    const imageUrl = "http://localhost:3000/image";
    const image = new Image();
    image.crossOrigin = 'Anonymous'; // Enable cross-origin image access
    image.src = 

    image.onload = function() {
      ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
      imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
    };

    canvas.addEventListener('click', function(event) {
      const x = event.offsetX;
      const y = event.offsetY;

      const clickedColor = getColorAtPixel(x, y);
      const targetColor = [clickedColor[0], clickedColor[1], clickedColor[2]]; // Target color from the clicked pixel
      const replacementColor = [255, 0, 0]; // Replace with red in this example

      replaceColor(targetColor, replacementColor);

      // Redraw the canvas with the modified image data
      ctx.putImageData(imageData, 0, 0);
    });

    function getColorAtPixel(x, y) {
      const index = (y * canvas.width + x) * 4;
      return [
        imageData.data[index],
        imageData.data[index + 1],
        imageData.data[index + 2]
      ];
    }

    function replaceColor(targetColor, replacementColor) {
      for (let i = 0; i < imageData.data.length; i += 4) {
        const r = imageData.data[i];
        const g = imageData.data[i + 1];
        const b = imageData.data[i + 2];

        if (r === targetColor[0] && g === targetColor[1] && b === targetColor[2]) {
          // Replace the color if it matches the target color
          imageData.data[i] = replacementColor[0];
          imageData.data[i + 1] = replacementColor[1];
          imageData.data[i + 2] = replacementColor[2];
        }
      }
    }
  </script>
</body>
</html>
